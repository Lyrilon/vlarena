<!DOCTYPE html>
<html lang="zh-CN" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>VLArena Â· æ•°æ®ä¸ä»»åŠ¡ç®¡ç†</title>

  <!-- Tailwind -->
  <script>window.tailwind={config:{darkMode:'class'}};</script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    :root{color-scheme:light dark}
    body{font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,'Apple Color Emoji','Segoe UI Emoji'}
    .dragging{opacity:.5}
    .modal-backdrop{background:rgba(0,0,0,.55)}
  </style>

  <script>
    // åˆå§‹ä¸»é¢˜ï¼šlocalStorage > ç³»ç»Ÿ > é»˜è®¤ dark
    (function(){
      const saved=localStorage.getItem('theme');
      const prefersDark=window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches;
      document.documentElement.classList.toggle('dark', saved? saved==='dark' : (prefersDark||true));
    })();
  </script>
</head>
<body class="min-h-screen bg-gradient-to-b from-slate-950 via-slate-900 to-slate-950 text-slate-100">
  <div class="pointer-events-none absolute inset-0 -z-10 bg-[radial-gradient(ellipse_at_top,rgba(34,211,238,0.20),transparent_45%),radial-gradient(ellipse_at_bottom,rgba(129,140,248,0.20),transparent_45%)]"></div>

  <!-- é¡¶éƒ¨å¯¼èˆªï¼šä¸ç«™ç‚¹ä¸€è‡´ -->
  <header class="sticky top-0 z-30 backdrop-blur supports-[backdrop-filter]:bg-slate-900/60 bg-slate-900/80 border-b border-white/10">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 py-3 flex items-center justify-between">
      <a href="index.html" class="flex items-center gap-2">
        <span class="relative"><span class="absolute -inset-1 rounded-xl bg-cyan-500/30 blur-sm"></span><span class="relative rounded-xl bg-gradient-to-br from-cyan-400 to-indigo-400 p-2 shadow-lg"><svg class="w-5 h-5 text-slate-950" viewBox="0 0 24 24" fill="currentColor"><path d="M11 3h2v4h-2zM4.222 5.636l1.414-1.414 2.828 2.829-1.414 1.413zM3 11h4v2H3zM5.636 19.778l2.828-2.828 1.414 1.414-2.828 2.828zM11 17h2v4h-2zM16.122 18.364l1.414-1.414 2.829 2.828-1.415 1.415zM17 11h4v2h-4zM18.364 7.05l-1.414 1.415-2.828-2.829 1.414-1.414z"/></svg></span></span>
        <span class="font-bold tracking-tight text-lg">VLArena</span>
        <span class="text-xs text-slate-400 hidden sm:inline">Vision Â· Language Â· Action Lab</span>
      </a>
      <nav class="hidden md:flex items-center gap-6 text-sm">
        <a href="index.html" class="text-slate-300 hover:text-white">é¦–é¡µ</a>
        <a href="benchmark.html" class="text-slate-300 hover:text-white">Benchmark æ¦œå•</a>
        <a href="paper_map.html" class="text-slate-300 hover:text-white">è®ºæ–‡åœ°å›¾</a>
        <a href="datasets.html" class="text-slate-100">æ•°æ®ä¸ä»»åŠ¡</a>
        <a href="repro.html" class="text-slate-300 hover:text-white">å¤ç°æ—¥å¿—</a>
        <a href="tools.html" class="text-slate-300 hover:text-white">å·¥å…·ä¸Playground</a>
      </nav>
    </div>
  </header>

  <main class="mx-auto max-w-7xl px-4 sm:px-6 py-8">
    <div class="flex items-end justify-between gap-4">
      <div>
        <h1 class="text-3xl sm:text-4xl font-extrabold tracking-tight">æ•°æ®ä¸ä»»åŠ¡ Â· ç®¡ç†é¢æ¿</h1>
        <p class="mt-2 text-slate-300">é›†ä¸­ç®¡ç† <span class="text-cyan-300 font-semibold">Benchmark</span> ä¸ <span class="text-indigo-300 font-semibold">Dataset</span> å¡ç‰‡ï¼šæ”¯æŒæ–°å¢/ç¼–è¾‘/åˆ é™¤/æ‹–æ‹½æ’åºã€æ‰¹é‡å¯¼å…¥å¯¼å‡ºã€‚</p>
      </div>
      <div class="flex items-center gap-2">
        <button id="exportBtn" class="rounded-xl px-3 py-1.5 bg-white/5 border border-white/10 hover:bg-white/10 text-sm">å¯¼å‡º JSON</button>
        <label class="rounded-xl px-3 py-1.5 bg-white/5 border border-white/10 hover:bg-white/10 text-sm cursor-pointer">å¯¼å…¥ JSON<input id="importInput" type="file" accept="application/json" class="hidden"/></label>
        <button id="addCardBtn" class="rounded-xl px-3 py-1.5 bg-cyan-500/20 border border-cyan-400/40 hover:bg-cyan-400/25 text-sm">æ–°å»ºå¡ç‰‡</button>
      </div>
    </div>

    <!-- è¿‡æ»¤ä¸æœç´¢ -->
    <section class="mt-4 rounded-2xl border border-white/10 bg-white/5 p-4">
      <div class="grid md:grid-cols-3 gap-3 items-end">
        <div>
          <label class="text-xs text-slate-400">æœç´¢ï¼ˆåç§° / æ ‡ç­¾ / ç®€ä»‹ï¼‰</label>
          <div class="mt-1 flex items-center gap-2 rounded-2xl bg-white/5 border border-white/10 px-3 py-2">
            <span class="text-slate-400">ğŸ”</span>
            <input id="searchInput" placeholder="å¦‚ï¼šLIBERO / BRIDGE / æœºå™¨äººæ“ä½œ" class="bg-transparent outline-none w-full"/>
          </div>
        </div>
        <div>
          <label class="text-xs text-slate-400">ç±»å‹</label>
          <div class="mt-1 flex gap-2">
            <select id="typeFilter" class="w-full rounded-xl bg-white/5 border border-white/10 px-3 py-2">
              <option value="all">å…¨éƒ¨</option>
              <option value="benchmark">Benchmark</option>
              <option value="dataset">Dataset</option>
            </select>
          </div>
        </div>
        <div>
          <label class="text-xs text-slate-400">æ ‡ç­¾ï¼ˆé€—å·åˆ†éš”ï¼Œæ¨¡ç³ŠåŒ¹é…ï¼‰</label>
          <input id="tagFilter" class="mt-1 w-full rounded-xl bg-white/5 border border-white/10 px-3 py-2" placeholder="manipulation, language, sim2real"/>
        </div>
      </div>
    </section>

    <!-- å®¹å™¨ï¼šå¡ç‰‡åˆ—è¡¨ï¼ˆå¯æ‹–æ‹½æ’åºï¼‰ -->
    <section class="mt-6">
      <div id="cards" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4"></div>
      <div id="emptyState" class="hidden rounded-2xl border border-white/10 bg-white/5 p-8 text-center text-slate-400">æš‚æ— æ•°æ®ï¼Œç‚¹å‡»å³ä¸Šè§’â€œæ–°å»ºå¡ç‰‡â€æˆ–å¯¼å…¥ JSONã€‚</div>
    </section>
  </main>

  <!-- å¼¹çª—ï¼šæ–°å¢ / ç¼–è¾‘å¡ç‰‡ -->
  <div id="modal" class="fixed inset-0 z-50 hidden items-center justify-center p-4">
    <div class="modal-backdrop absolute inset-0" data-dismiss></div>
    <div class="relative w-full max-w-2xl rounded-2xl border border-white/10 bg-white/5 backdrop-blur p-6">
      <div class="flex items-center justify-between">
        <h3 class="text-lg font-semibold" id="modalTitle">æ–°å»ºå¡ç‰‡</h3>
        <button class="p-2 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10" data-dismiss>âœ•</button>
      </div>
      <form id="cardForm" class="mt-4 space-y-3">
        <div class="grid sm:grid-cols-2 gap-3">
          <div>
            <label class="text-xs text-slate-400">ç±»å‹</label>
            <select name="type" class="mt-1 w-full rounded-xl bg-white/5 border border-white/10 px-3 py-2" required>
              <option value="benchmark">Benchmark</option>
              <option value="dataset">Dataset</option>
            </select>
          </div>
          <div>
            <label class="text-xs text-slate-400">åç§°</label>
            <input name="name" class="mt-1 w-full rounded-xl bg-white/5 border border-white/10 px-3 py-2" placeholder="LIBERO / BRIDGE / CALVIN / RT-X" required />
          </div>
        </div>
        <div>
          <label class="text-xs text-slate-400">ç®€ä»‹</label>
          <textarea name="desc" rows="3" class="mt-1 w-full rounded-xl bg-white/5 border border-white/10 px-3 py-2" placeholder="ä¸€å¥è¯è¯´æ˜æ•°æ®/åŸºå‡†çš„ç‰¹ç‚¹"></textarea>
        </div>
        <div class="grid sm:grid-cols-2 gap-3">
          <div>
            <label class="text-xs text-slate-400">å®˜ç½‘/ä¸»é¡µé“¾æ¥</label>
            <input name="homepage" class="mt-1 w-full rounded-xl bg-white/5 border border-white/10 px-3 py-2" placeholder="https://..." />
          </div>
          <div>
            <label class="text-xs text-slate-400">ä»£ç ä»“åº“ï¼ˆå¯é€‰ï¼‰</label>
            <input name="repo" class="mt-1 w-full rounded-xl bg-white/5 border border-white/10 px-3 py-2" placeholder="https://github.com/..." />
          </div>
        </div>
        <div>
          <label class="text-xs text-slate-400">æ ‡ç­¾ï¼ˆé€—å·åˆ†éš”ï¼‰</label>
          <input name="tags" class="mt-1 w-full rounded-xl bg-white/5 border border-white/10 px-3 py-2" placeholder="manipulation, language, sim2real" />
        </div>
        <div class="flex items-center justify-end gap-2 pt-2">
          <button type="button" class="rounded-xl px-3 py-1.5 bg-white/5 border border-white/10 hover:bg-white/10" data-dismiss>å–æ¶ˆ</button>
          <button type="submit" class="rounded-xl px-3 py-1.5 bg-cyan-500/20 border border-cyan-400/40 hover:bg-cyan-400/25">ä¿å­˜</button>
        </div>
      </form>
    </div>
  </div>

  <footer class="border-t border-white/10 py-8">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 flex flex-col md:flex-row items-center justify-between gap-3 text-slate-400 text-sm">
      <div>Â© <span id="year"></span> VLArena Â· Vision Â· Language Â· Action Lab</div>
      <div class="flex items-center gap-3">
        <a class="hover:text-slate-200" href="benchmark.html">Benchmark è”åˆæ¦œå•</a>
        <a class="hover:text-slate-200" href="paper_map.html">è®ºæ–‡åœ°å›¾</a>
        <a class="hover:text-slate-200" href="#">åé¦ˆ</a>
      </div>
    </div>
  </footer>

  <script>
    // ======= æ•°æ®å±‚ï¼šlocalStorage æŒä¹…åŒ– =======
    const KEY='vlarena.cards.v1';
    const seed=[
      {id:crypto.randomUUID(), type:'benchmark', name:'LIBERO', desc:'å¤šä»»åŠ¡æœºå™¨äººæ“ä½œåŸºå‡†ï¼šSPATIAL / OBJECT / GOAL / LONG', homepage:'https://lifelong-robot-learning.github.io/libero/', repo:'', tags:['manipulation','multi-task','sim']},
      {id:crypto.randomUUID(), type:'benchmark', name:'BRIDGE', desc:'è§„æ¨¡åŒ–æ¨¡ä»¿å­¦ä¹ è¯„æµ‹å¥—ä»¶ï¼ˆv2 å¯æ‰©å±•ï¼‰', homepage:'https://rail-berkeley.github.io/bridge_data/', repo:'', tags:['imitation','cross-domain']},
      {id:crypto.randomUUID(), type:'benchmark', name:'CALVIN', desc:'æœºæ¢°è‡‚å¤šä»»åŠ¡ã€é•¿ç›®æ ‡åºåˆ—', homepage:'https://calvin.cs.uni-freiburg.de/', repo:'', tags:['manipulation','long-horizon']},
      {id:crypto.randomUUID(), type:'benchmark', name:'RT-X / Open-X', desc:'è·¨æœºå™¨äºº/è·¨ä»»åŠ¡é€šç”¨ BC è¯„æµ‹', homepage:'#', repo:'', tags:['rtx','generalization']},
      {id:crypto.randomUUID(), type:'dataset', name:'Open-X Data', desc:'å¼€æºå¤šæœºå™¨äººæ•°æ®åˆé›†', homepage:'#', repo:'', tags:['multi-robot']},
      {id:crypto.randomUUID(), type:'dataset', name:'RLAIF-Human', desc:'äººç±»åå¥½/åé¦ˆæ•°æ®', homepage:'#', repo:'', tags:['preference','rlaif']}
    ];
    function load(){ try{ return JSON.parse(localStorage.getItem(KEY)) || seed }catch{ return seed } }
    function save(list){ localStorage.setItem(KEY, JSON.stringify(list)); }

    // ======= è§†å›¾æ¸²æŸ“ =======
    const cardsEl=document.getElementById('cards');
    const emptyEl=document.getElementById('emptyState');
    let data=load();

    function tagChip(t){ return `<span class="inline-flex items-center gap-1 px-2 py-0.5 text-xs rounded-lg bg-white/5 border border-white/10">${t}</span>` }

    function render(list=data){
      cardsEl.innerHTML='';
      if(!list.length){ emptyEl.classList.remove('hidden'); return } else emptyEl.classList.add('hidden');
      list.forEach(item=>{
        const card=document.createElement('div');
        card.className='group rounded-2xl border border-white/10 bg-white/5 p-4 hover:bg-white/10 transition relative';
        card.draggable=true; card.dataset.id=item.id;
        card.innerHTML=`
          <div class="flex items-start justify-between gap-3">
            <div>
              <div class="text-xs ${item.type==='benchmark'?'text-cyan-300':'text-indigo-300'}">${item.type.toUpperCase()}</div>
              <a href="${item.homepage||'#'}" target="_blank" class="mt-1 block font-semibold leading-snug">${item.name}</a>
              <p class="mt-1 text-sm text-slate-300">${item.desc||''}</p>
              <div class="mt-2 flex flex-wrap gap-1">${(item.tags||[]).map(tagChip).join('')}</div>
            </div>
            <div class="shrink-0 flex items-center gap-2 opacity-0 group-hover:opacity-100 transition">
              ${item.repo?`<a href="${item.repo}" target="_blank" title="ä»£ç ä»“åº“" class="rounded-lg px-2 py-1 bg-white/5 border border-white/10 hover:bg-white/10 text-sm">Code</a>`:''}
              <button data-edit class="rounded-lg px-2 py-1 bg-white/5 border border-white/10 hover:bg-white/10 text-sm">ç¼–è¾‘</button>
              <button data-del class="rounded-lg px-2 py-1 bg-white/5 border border-white/10 hover:bg-white/10 text-sm text-red-300">åˆ é™¤</button>
              <span class="cursor-move rounded-lg px-2 py-1 bg-white/5 border border-white/10 text-xs" title="æ‹–æ‹½æ’åº">â†•</span>
            </div>
          </div>`;
        // äº‹ä»¶ï¼šç¼–è¾‘/åˆ é™¤
        card.querySelector('[data-edit]')?.addEventListener('click',()=>openModal(item));
        card.querySelector('[data-del]')?.addEventListener('click',()=>delCard(item.id));
        // æ‹–æ‹½
        card.addEventListener('dragstart',e=>{ card.classList.add('dragging'); e.dataTransfer.setData('text/plain', item.id); });
        card.addEventListener('dragend',()=>card.classList.remove('dragging'));
        cardsEl.appendChild(card);
      });
    }

    // æ‹–æ‹½æ’åºå®¹å™¨é€»è¾‘
    cardsEl.addEventListener('dragover',e=>{
      e.preventDefault();
      const dragging=document.querySelector('.dragging');
      const after=getDragAfterElement(cardsEl, e.clientY);
      if(after==null) cardsEl.appendChild(dragging); else cardsEl.insertBefore(dragging, after);
    });
    function getDragAfterElement(container, y){
      const els=[...container.querySelectorAll('[draggable]:not(.dragging)')];
      return els.reduce((closest,child)=>{
        const box=child.getBoundingClientRect();
        const offset=y - box.top - box.height/2;
        if(offset<0 && offset>closest.offset){ return {offset, element:child} } else return closest;
      }, {offset:Number.NEGATIVE_INFINITY}).element;
    }

    // è¿‡æ»¤
    const searchInput=document.getElementById('searchInput');
    const typeFilter=document.getElementById('typeFilter');
    const tagFilter=document.getElementById('tagFilter');
    function applyFilter(){
      const q=(searchInput.value||'').toLowerCase();
      const type=typeFilter.value; const tags=(tagFilter.value||'').toLowerCase().split(',').map(s=>s.trim()).filter(Boolean);
      const filtered=data.filter(it=>{
        const text=(it.name+" "+(it.desc||'')+" "+(it.tags||[]).join(' ')).toLowerCase();
        const okText = !q || text.includes(q);
        const okType = type==='all' || it.type===type;
        const okTags = !tags.length || tags.every(t=> (it.tags||[]).join(' ').toLowerCase().includes(t));
        return okText && okType && okTags;
      });
      render(filtered);
    }
    searchInput.addEventListener('input',applyFilter);
    typeFilter.addEventListener('change',applyFilter);
    tagFilter.addEventListener('input',applyFilter);

    // æ–°å»º/ç¼–è¾‘
    const modal=document.getElementById('modal');
    const form=document.getElementById('cardForm');
    const modalTitle=document.getElementById('modalTitle');
    let editingId=null;
    function openModal(item){
      editingId=item?.id||null; modalTitle.textContent= editingId? 'ç¼–è¾‘å¡ç‰‡' : 'æ–°å»ºå¡ç‰‡';
      form.type.value=item?.type||'benchmark';
      form.name.value=item?.name||''; form.desc.value=item?.desc||'';
      form.homepage.value=item?.homepage||''; form.repo.value=item?.repo||'';
      form.tags.value=(item?.tags||[]).join(', ');
      modal.classList.remove('hidden'); modal.classList.add('flex');
    }
    function closeModal(){ modal.classList.add('hidden'); modal.classList.remove('flex'); }
    document.querySelectorAll('[data-dismiss]').forEach(el=> el.addEventListener('click', closeModal));
    document.getElementById('addCardBtn').addEventListener('click',()=>openModal(null));

    form.addEventListener('submit',e=>{
      e.preventDefault();
      const payload={
        id: editingId || crypto.randomUUID(),
        type: form.type.value,
        name: form.name.value.trim(),
        desc: form.desc.value.trim(),
        homepage: form.homepage.value.trim(),
        repo: form.repo.value.trim(),
        tags: (form.tags.value||'').split(',').map(s=>s.trim()).filter(Boolean)
      };
      if(!payload.name){ alert('åç§°å¿…å¡«'); return }
      if(editingId){ data=data.map(d=> d.id===editingId? payload : d); }
      else{ data=[payload, ...data]; }
      save(data); applyFilter(); closeModal();
    });

    function delCard(id){ if(confirm('ç¡®å®šåˆ é™¤è¯¥å¡ç‰‡ï¼Ÿ')){ data=data.filter(d=>d.id!==id); save(data); applyFilter(); } }

    // å¯¼å‡º/å¯¼å…¥
    document.getElementById('exportBtn').addEventListener('click',()=>{
      const blob=new Blob([JSON.stringify(data,null,2)],{type:'application/json'});
      const url=URL.createObjectURL(blob);
      const a=document.createElement('a'); a.href=url; a.download='vlarena_datasets.json'; a.click(); URL.revokeObjectURL(url);
    });
    document.getElementById('importInput').addEventListener('change',async (e)=>{
      const file=e.target.files?.[0]; if(!file) return; try{
        const text=await file.text(); const json=JSON.parse(text);
        if(!Array.isArray(json)) throw new Error('JSON é¡¶å±‚åº”ä¸ºæ•°ç»„');
        // ç®€å•æ ¡éªŒï¼ˆæµ‹è¯•ç”¨ä¾‹ï¼‰
        const ok=json.every(x=> x && typeof x.name==='string' && (x.type==='benchmark'||x.type==='dataset'));
        if(!ok) throw new Error('å…ƒç´ å¿…é¡»åŒ…å« name ä¸” type âˆˆ {benchmark,dataset}');
        data=json.map(x=> ({ id:x.id||crypto.randomUUID(), type:x.type, name:x.name, desc:x.desc||'', homepage:x.homepage||'', repo:x.repo||'', tags:Array.isArray(x.tags)?x.tags:[] }));
        save(data); applyFilter(); alert('å¯¼å…¥æˆåŠŸï¼š'+data.length+' æ¡');
      }catch(err){ alert('å¯¼å…¥å¤±è´¥ï¼š'+err.message); }
      e.target.value='';
    });

    // åˆå§‹æ¸²æŸ“
    document.getElementById('year').textContent=new Date().getFullYear();
    applyFilter();

    // ===== ç®€å•æµ‹è¯•ï¼ˆä¸ä¼šé˜»æ–­é¡µé¢ï¼‰ =====
    (function tests(){
      const t1 = Array.isArray(load());
      console.assert(t1, '[TEST] åˆå§‹æ•°æ®åº”ä¸ºæ•°ç»„');
      const sample={id:crypto.randomUUID(),type:'dataset',name:'_T',desc:'',homepage:'#',repo:'',tags:[]};
      save([sample]); const t2 = load()[0].name==='_T';
      console.assert(t2, '[TEST] ä¿å­˜/åŠ è½½ round-trip');
      save(data); // è¿˜åŸ
    })();
  </script>
</body>
</html>
